+Book
rails g model Book title:string description:text price:float stock:integer author:references category:references
Title, price, books in stock fields should be required
how many books in stock (просто поле остаток?)
Should belong to author and category
Should have many reviews from customers

+Category
rails g model Category title:string
Title should be required and unique
Should have many books

+Author
rails g model Author first_name:string last_name:string biography:text
first_name, last_name fields should be required
Should have many books

# old +Rating
#rails g model Rating title:text review:text rating_number:integer book:references customer:references
#rating_number must be from one to ten
#Should belong to customer and book
+Review
rails g scaffold Review title:text review_text:text rating:integer book:references customer:references
review must be from one to ten
Should belong to customer and book

+Customer
rails g model Customer email:string password:string first_name:string last_name:string
rails g scaffold Customer email:string password_digest:string first_name:string last_name:string

Email, password, first_name, last_name fields should be required
Email should be unique
Should have many orders, reviews
A customer should be able to create a new order
A customer should be able to return a current order in progress

+/-Order
rails g model Order total_price:float completed_date:date state:string customer:references credit_card:references billing_address:references shipping_address:references
state (in progress/complited/shipped)
Total price, completed date and state fields should be required
By default an order should have 'in progress' state
Should belong to customer and credit card
Should have many order items
Should have one billing address and one shipping address (use STI)
An order should be able to return a total price of the order
An order should be able to add a book to the order

+OrderItem
rails g model OrderItem price:float quantity:integer total_sum:integer book:references order:references
Price and quantity fields should be required
Should belong to book and order

+Address
rails g model Address address:string zip_code:string city:string phone:string country:references
All fields should be required
link to country

+Country
rails g model Country name:string
Name should be required and unique

+CreditCard
rails g model CreditCard number:integer CVV:integer expiration_year:integer expiration_month:integer first_name:string last_name:string customer:references
All fields should be required
expiration_month, expiration_year range control in model
Should belong to customer and have many orders

Necessary to create a DB structure, models, associations and validations to models, autotests and factories for autotes

DataTypes
:binary
:boolean
:date
:datetime
:decimal
:float
:integer
:primary_key
:references
:string
:text
:time
:timestamp

rake db:migrate RAILS_ENV=test

order total_price check for rails console:
order = Order.new
order.shipping = 10
order.save
oi = OrderItem.new
oi.quantity = 2
oi.price = 5
oi.order = order
oi.save
oi
oi = OrderItem.new
oi.quantity = 3
oi.price = 6
oi.order = order
oi.save
order.total_price

rails g controller Orders index create edit view

class Cls
  def f
    p self
  end
end
c = Cls.new
c.f

class Cls
  def e
    p 'E'
  end
end
c.e

class Cls
  def self.f
    p self
  end
end

        <% if signed_in? %>
          <input type="text" id="books_amount" class="form-control" placeholder="1">
          <% form_tag(new_order_item_path(@book), method: 'post') do %>
            <button type="submit" class="btn btn-default">ADD TO CART</button>
          <% end %>
        <% end %>

rails g scaffold Test t1:string t2:integer